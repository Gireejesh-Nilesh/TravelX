<section class="book-tour">
  <div class="book-tour__overlay">
    <div class="book-tour__panel">
      <h2>Book a Tour</h2>
      <p class="book-tour__subtitle">Build your itinerary and secure your spot in minutes.</p>

      <form>
        <!-- DESTINATION -->
        <label>Tourist place</label>
        <select [value]="selectedPlaceId()" (change)="onPlaceChange($any($event.target).value)">
          <option *ngFor="let place of places" [value]="place.id">
            {{ place.name }}
          </option>
          <option value="other">Other</option>
        </select>

        <input
          *ngIf="showOtherField()"
          type="text"
          placeholder="Enter place name"
          [value]="otherPlaceName()"
          (input)="otherPlaceName.set($any($event.target).value)"
        />

        <!-- DATE OF VISIT (NEW FIELD) -->
        <label>Date of visit</label>
        <input
          type="date"
          [min]="today"
          [value]="visitDate()"
          (change)="visitDate.set($any($event.target).value)"
        />

        <!-- MEMBERS -->
        <label>Number of members</label>
        <input
          type="number"
          min="1"
          [value]="members()"
          (input)="onMembersChange($any($event.target).value)"
        />

        <!-- HOTELS (CONVERTED TO DROPDOWN) -->
        <label>Hotels available</label>
        <select [value]="selectedHotel()?.name" (change)="onHotelChange($any($event.target).value)">
          <option *ngFor="let hotel of hotelOptions()" [value]="hotel.name">
            {{ hotel.name }} â€“ ${{ hotel.basePrice }}
          </option>
        </select>

        <!-- TOTAL -->
        <div class="book-tour__total">
          <span>Total price</span>
          <strong>${{ totalPrice }}</strong>
        </div>

        <!-- ACTIONS -->
        <div class="book-tour__actions">
          <button type="button" class="book-tour__back" (click)="goBack()">Go Back</button>
          <button type="button" [disabled]="!paymentReady()" (click)="startPayment()">
            Pay Now
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- SCRATCH CARD -->
  <div class="scratch" *ngIf="scratchRevealed()">
    <div class="scratch__card">
      <div class="scratch__cover"></div>
      <div class="scratch__message">
        <h3>Payment Successful</h3>
        <p>Your booking has been added to Activities.</p>
        <button type="button" (click)="closeScratch()">Go to Activities</button>
      </div>
    </div>
  </div>
</section>
